{"version":3,"sources":["../../src/factories/data_fcty.js"],"names":[],"mappings":"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","file":"data_fcty.js","sourcesContent":["\nconst _           = require(\"lodash\");\nconst DataManager = require(\"datamanager\");\n\nclass DataFcty extends DataManager {\n\n  init(){\n    this.cache = {};\n    this.pagination = 50;\n    this.page       = 1;\n    this.itemNo     = 0;\n    this.current_search = null;\n  }\n\n\n\n  addSelected(ids){\n    if(this.checkDataIds(ids)){\n      this.addToHistory();\n      this.data = this.data.map((d)=>{\n        let selected = false;\n        let id = d.get(\"id\");\n        if(_.isArray(ids)){\n          selected = _.contains(ids, id);\n        } else {\n          selected = ids === id;\n        }\n\n        d = d.set(\"selected\", selected);\n        return d;\n      });\n    }\n\n  }\n\n  setApi(uri){\n    this.url = uri;\n  }\n\n  cachedChecker(values){\n    let checker =  {\n      text      : this.checkCacheText(values(\"text\"), values(\"keys\")),\n      filters   : this.checkCacheFilters(values(\"filters\")),\n      daterange : this.checkCachedDateRanges(values(\"dateRanges\"))\n    }\n\n    let checkAll = function(){\n      return _.reduce(_.values(checker), (t, n)=>{\n        return (n && t);\n      });\n    }\n\n    return function(key){\n      return (key === \"all\") ? checkAll() : checker[key];\n    }\n  }\n\n  checkCache(items, key){\n    let check = this.checkEmptyOrCached(items, key);\n    if(_.isBoolean(check)){\n      return check;\n    }\n\n    return (tester)=>{\n      check = true;\n      _.forEach(items, (i)=>{\n        if(tester(i)){\n          check = false;\n          return false;\n        }\n      });\n\n      return check;\n    }\n  }\n\n  checkDataIds(d){\n    if(_.isArray(d)){\n      return !_.isEmpty(d);\n    } else {\n      return _.isNumber(d);\n    }\n  }\n\n  checkCachedDateRanges(dateRanges){\n    let checker = this.checkCache(dateRanges, \"dateRanges\");\n\n    if(_.isBoolean(checker)){\n      return checker;\n    }\n\n    let checkDates = (fir, sec)=>{\n      return fir !== sec;\n    }\n\n    let checkStFn = (cur, cache)=>{\n      return checkDates(cur.st, cache.st)\n             || checkDates(cur.fn, cache.fn);\n    }\n\n    return checker((item)=>{\n      let cached = this.cache.dateRanges;\n\n      _.forIn(dateRanges, (v, k)=>{\n        if(checkStFn(v, _.get(cached, k))){\n          check = false;\n          return false;\n        }\n      });\n\n      return check;\n    })\n\n\n    // let check = this.checkEmptyOrCached(dateRanges, \"dateRanges\");\n\n    // if(_.isBoolean(check)){\n    //   return check;\n    // }\n\n    // check = true;\n    // let cacheDR = this.cache.dateRanges;\n\n    // _.forIn(dateRanges, (v, k)=>{\n    //   let dr = cacheDR[k];\n\n    //   if(v.st !== dr.st || v.fn !== dr.fn){\n    //     check = false;\n    //     return false;\n    //   }\n    // });\n\n    // return check;\n  }\n\n  checkCacheFilters(filters){\n    let checker = this.checkCache(filters, \"filters\")\n\n    if(_.isBoolean(checker)){\n      return checker;\n    }\n\n    return checker((item)=>{\n      let cached = this.getFilterByKey(\"filter_by\", item.filter_by);\n\n      return !(item.selected.equals(cached.selected))\n    })\n  }\n\n\n  checkCacheText(val, keys){\n    let checkKeys = this.checkEmptyOrCached(keys, \"keys\");\n    if (_.isBoolean(checkKeys)){\n      return checkKeys;\n    }\n\n    if(!this.cache.text){\n      return false;\n    }\n\n    return  this.cache.text === val && (_.difference(keys, this.cache.keys).length === 0);\n  }\n\n\n  checkDates(date, range){\n    let test = false;\n    if(_.isDate(date)){\n      if((date > range.st) && (date < range.fn)){\n        test = true;\n      }\n    }\n\n    return test;\n\n  }\n\n\n\n  // Check and return filtered data\n  checker(v, t, c){\n    if(_.isEmpty(v)){\n      return false;\n    }\n\n    let test  = t;\n    let cache = c;\n\n    console.log(v, t())\n    console.log(\"cache <<<<\", c)\n\n    return (searchFn, ...args)=>{\n      args.push(v);\n      console.log(args)\n      // console.log(\"cache\", cache)\n      return (test()) ? cache : searchFn.apply(this, args)\n    }\n  }\n\n  checkerFilters(data, check, values){\n    let filters = this.checker(values(\"filters\"),\n      ()=>{ return check(\"filters\") },\n      this.cache.filterSearch\n    );\n\n    return (filters) ? filters(this.filterSearch, data) : data;\n  }\n\n  checkerDateRanges(data, check, values){\n    let dr = this.checker(()=>{\n        return check(\"filters\") && check(\"dateRanges\")\n      },\n      this.cache.dateRangesSearch,\n      values(\"dateRanges\")\n    );\n\n    return (dr) ? dr(this.dateRangeSearch, data) : data;\n  }\n\n  checkTabs(){\n\n  }\n\n  checkEmptyOrCached(items, key){\n    if(_.isEmpty(items) || !items){\n      return true;\n    }\n\n    if(!this.cache[key]){\n      return false;\n    }\n\n    return null;\n  }\n\n\n\n  checkFilters(opts, filter){\n    let selected = this.getIds(filter.selected);\n    let ids      = opts.get(filter.filter_by);\n\n    return this.checkIds(selected, ids);\n  }\n\n  checkIds(selected, ids){\n    if(_.isArray(ids)){\n      if(_.intersection(selected, ids).length > 0){\n        return true;\n      }\n    } else if(_.include(selected, ids)){\n      return true;\n    }\n\n    return false;\n  }\n\n\n  dateRangeSearch(search, dateRanges){\n    this.cache.dateRanges       = _.cloneDeep(dateRanges);\n    if(!_.isEmpty(dateRanges)){\n      search = search.filter((d)=>{\n        let checked = false;\n        _.forIn(dateRanges, (dr, key)=>{\n          if(this.checkDates(d.get(key), dr)){\n            checked = true;\n            return false;\n          }\n        });\n\n        return checked;\n      });\n    }\n\n    this.cache.dateRangesSearch = search;\n    return search;\n  }\n\n  filterSearch(search, filters){\n    // console.log(\"searching filters\", filters)\n    this.cache.filters = filters;\n\n    filters = _.where(filters, {all:false});\n\n    if(filters.length > 0){\n      search = search.filter((d)=>{\n        let checked = false;\n        _.forEach(filters, (filter)=>{\n          if(this.checkFilters(d.get(\"filters\"), filter)){\n            checked = true;\n            return false;\n          }\n        });\n\n        return checked;\n      });\n    }\n\n    this.cache.filterSearch = search;\n    // console.log(\"searching filters\", this.cache)\n    return search;\n  }\n\n  filterByIds(ids){\n    if(this.data){\n      return this.data.filter((d)=>{\n        // console.log(ids, d.get(\"id\"));\n        return _.contains(ids, Number(d.get(\"id\")));\n      });\n    }\n    return null;\n  }\n\n  getFilterByKey(key, keyComp){\n    // console.log(\"filters\", this.cache.filters)\n    return _.find(this.cache.filters, (c)=>{\n      return c[key] === keyComp;\n    });\n  }\n\n  getIds(selected){\n    let ids = selected.map((s)=>{\n      return s.get(\"id\");\n    });\n\n    return ids.toJS();\n  }\n\n  getSearch(data, val, keys){\n    //Do search\n    let regex = new RegExp(val, \"i\");\n    let search = data.filter((d)=>{\n      return this.searchTxt(regex, d, keys);\n    });\n\n    this.cache.text   = val;\n    this.cache.keys   = keys;\n    this.cache.search = search;\n\n    return search;\n  }\n\n  getValues(data, keys){\n    if(keys.length > 1){\n      let all = data.filter((v, k)=>{\n        return _.contains(keys, k);\n      });\n      return all.valueSeq().toJS().join(\" \");\n    } else {\n      let k = (_.isArray(keys)) ? _.first(keys) : keys;\n      return data.get(k);\n    }\n  }\n\n  remove(id){\n    // let del = this.findById(id);\n    let del    =  super.remove(id);\n    let search = this.cache.fullSearch;\n\n    if(del && search){\n      this.cache = _.mapValues(this.cache, (v)=>{\n\n        if(v.indexOf){\n          let i = v.indexOf(del);\n          if(i > -1) {\n            v = v.delete(i);\n          }\n        }\n        return v;\n      });\n\n    }\n\n    return del;\n  }\n\n  searchTxt(regex, data, keys){\n    let values = this.getValues(data, keys);\n\n    if(values){\n      return (String(values).search(regex) > -1);\n    }\n\n    return false;\n  }\n\n\n\n  search(...args){\n    let values = this.setValues.apply(this, args);\n\n    //Cache Checks\n    let check = this.cachedChecker(values)\n\n    if(check(\"all\")){\n      return this.cache.fullSearch;\n    }\n    console.log(\"cache\", this.cache)\n    let searchData = this.checkerFilters(this.data, check, values);\n\n    searchData = this.checkerDateRanges(searchData, check, values);\n\n    //Runs Search over data\n    if(!_.isEmpty(values(\"text\"))){\n      searchData =  this.getSearch(searchData, values(\"text\"), values(\"keys\"));\n    }\n\n    this.cache.fullSearch = searchData; // Caches search\n    return searchData;\n\n  }\n\n  //Setting Default values\n  setter(test, key){\n    let tester = test;\n    let k      = key;\n\n    return _.curry(function(obj, arg){\n      if(tester(arg)){\n        obj[k] = arg\n      }\n\n      return obj\n    });\n  }\n\n  createSetters(){\n    let setter_array = []\n    setter_array.push(this.setter((arg)=>{\n      return _.isString(arg);\n    }, \"text\"));\n\n    setter_array.push(this.setter((arg)=>{\n      return _.isArray(arg) && _.isString(_.first(arg));\n    }, \"keys\"));\n\n    setter_array.push(this.setter((arg)=>{\n      return _.isArray(arg) && _.isObject(_.first(arg));\n    }, \"filters\"));\n\n    setter_array.push(this.setter((arg)=>{\n      return _.isObject(arg) && _.has(arg, \"filterBy\");\n    }, \"tab\"));\n\n    setter_array.push(this.setter((arg)=>{\n      return _.isObject(arg) && !_.has(arg, \"filterBy\");\n    }, \"dateRanges\"));\n\n    return setter_array;\n  }\n\n  setValues(...args){\n\n    //Checks values\n    let settings = this.createSetters();\n\n    let values = {};\n    _.forEach(args, (arg)=>{\n      _.forEach(settings, (set)=>{\n        set    = set(values);\n        values = set(arg);\n      })\n\n    });\n\n    _.defaults(values,\n      { \"text\"       : \"\" },\n      { \"keys\"       : [] },\n      { \"filters\"    : [] },\n      { \"tab\"        : {} },\n      { \"dateRanges\" : {} });\n    return function(key){\n      return values[key]\n    };\n  }\n}\n\nmodule.exports = DataFcty;\n"]}