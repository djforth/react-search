{"version":3,"sources":["../../src/components/search.js"],"names":[],"mappings":"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","file":"search.js","sourcesContent":["//Libraries\nconst React = require(\"react/addons\");\nconst _     = require(\"lodash\");\n\n\n//Flux\n// const DataStore      = require(\"../stores/data_store\");\nconst DataActions   = require(\"../actions/data_actions\");\nconst FilterActions = require(\"../actions/filter_actions\");\n\n// Morse Libraies\nconst ViewportDetect = require(\"viewport-detection-es6\");\n\n\n//Components\nconst DataHead =  require(\"./data_head\");\nconst Filters  =  require(\"./filters\");\nconst Pagination = require(\"./pagination\");\n\nclass Search extends React.Component{\n\n  constructor(props) {\n    super(props);\n    this.active = [{active:false}];\n    // this._select.bind(this);\n    this.state = {data:[], keys:[], visible:[], device:\"desktop\"};\n  }\n\n\n  componentDidMount() {\n    const detect = new ViewportDetect();\n    let device = detect.getDevice();\n    this.size  = detect.windowSize();\n\n    this.setState({\n      device:device,\n      loading:true,\n      loading_txt:\"Starting data load\",\n      percent: 0,\n      visible:this.props[device]\n    });\n    detect.trackSize(function(device, size){\n      if(this.state.device !== device){\n        this.setState({\n          device:device,\n          visible:this.props[device]\n        });\n      }\n\n      this.size   = size;\n\n    }.bind(this));\n\n    //Adds Keys\n    FilterActions.setKeys(this.props.searchable);\n\n\n    //Get Data\n    this.setLoading();\n    // DataStore.setApi(this.props.dataApi);\n    // DataStore.fetchData();\n  }\n\n\n  handleSelect(event, selectedEvent){\n    this.setState({\n      activePage: selectedEvent.eventKey\n    });\n  }\n\n  loading(){\n    if(this.state.loading){\n      return (\n        <div className=\"loader\">\n          <h5>{this.state.loading_txt}</h5>\n          <ProgressBar label=\"Loading Data\" now={this.state.percent} key={\"loader\"} />\n        </div>\n      );\n    } else {\n      return \"\";\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Filters filterApi={this.props.filterApi} keys={this.props.searchable} key={\"filters\"} />\n        <DataHead device={this.state.device} keys={this.state.visible} css={this.props.css} key={_.uniqueId(\"samplehead\")} />\n        { this.props.children }\n        <Pagination key={_.uniqueId(\"pagination\")} />\n      </div>\n    );\n  }\n\n  setLoading(){\n\n    let FakeLoading = window.setInterval(()=>{\n      if(this.percent < 50){\n        this.percent++;\n      }\n\n      this.setState({percent:this.percent, loading:true, loading_txt:\"Waiting for Server to respond\"});\n    }, 1000);\n\n    //Get Data\n    DataActions.fetchData((p)=>{\n      clearInterval(FakeLoading);\n      if(p.percent >= 100){\n        this.setState({loading:false, percent:p.percent});\n      } else {\n        this.percent = (this.percent > p.percent) ? this.percent : p.percent;\n        this.setState({percent:this.percent, loading_txt:\"Loading Data\"});\n      }\n    }, this.props.dataApi);\n  }\n\n}\n\nmodule.exports = Search;\n"]}