{"version":3,"sources":["../../src/components/filters.js"],"names":[],"mappings":"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","file":"filters.js","sourcesContent":["//Libraries\nconst React = require(\"react/addons\");\nconst _     = require(\"lodash\");\n// const cx    = require(\"classnames\");\n\n//Flux\n// const DataStore      = require(\"../../stores/dataStore\");\nconst FilterStore = require(\"../stores/filter_store\");\nconst DataActions = require(\"../actions/data_actions\");\n\n//components\nconst FiltersCheck  = require(\"./filters_check\");\nconst FiltersSelect = require(\"./filters_select\");\nconst FiltersRadio  = require(\"./filters_radio\");\nconst SearchFilter  = require(\"./search_filter\");\n\n//Mixins\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\n\n\nclass Filters extends React.Component {\n  constructor(props) {\n    super(props);\n    this.chevron =  [\"glyphicon\", {\"glyphicon-chevron-up\":true}, {\"glyphicon-chevron-down\":false}];\n    this.panel     = [\"panel-body\", {\"hide\":true}];\n    this.state = {filters:null, chevron: this.getClasses(this.chevron), panel:this.getClasses(this.panel)};\n  }\n\n  componentDidMount() {\n\n    //Data Changers\n    FilterStore.addChangeListener(\"change\", this._onChange.bind(this));\n    FilterStore.addChangeListener(\"fetched\", this._onLoaded.bind(this));\n\n    //Get Data\n    // console.log(\"filterApi\", this.props.filterApi)\n    FilterStore.setApi(this.props.filterApi);\n    FilterStore.fetchData();\n  }\n\n  componentWillUnmount() {\n    FilterStore.removeChangeListener(\"change\", this._onChange);\n    FilterStore.removeChangeListener(\"fetched\", this._onLoaded);\n  }\n\n  renderFilters(){\n\n    if(this.state.filters){\n      // console.log(\"filterStore\",this.state.filters.toJS());\n       let items = _.map(this.state.filters, function(f){\n        let elm;\n        switch(f.getDetails(\"input_type\")){\n          case \"checkbox\":\n            elm = <FiltersCheck filter={f} key={_.uniqueId(\"check\")} />;\n          break;\n\n          case \"radio\":\n            elm = <FiltersRadio filter={f} key={_.uniqueId(\"radio\")} />;\n          break;\n          default:\n            elm = <FiltersSelect filter={f} key={_.uniqueId(\"select\")} />;\n        }\n\n        return elm;\n      });\n\n      return items;\n    }\n\n  }\n\n\n  render() {\n\n    return (\n      <div className=\"search-filter\">\n        <SearchFilter keys={this.props.keys} key=\"SearchFilter\" />\n        <div className=\"panel panel-default\">\n          <div className=\"panel-heading\">\n            Filters\n            <a href=\"#\" className=\"pull-right clickable\" onClick={this._onClick.bind(this)} >\n              <i className={this.state.chevron}> </i>\n            </a>\n          </div>\n          <div className={this.state.panel}>\n            {this.renderFilters()}\n            <div className=\"pad20 clearfix\">\n              <button type=\"button\" onClick={this._onFilter} className=\"btn btn-success pull-right\"><span className=\"glyphicon glyphicon-plus\"></span> Add Filters</button>\n            </div>\n          </div>\n\n        </div>\n      </div>);\n  }\n\n  _onFilter(e){\n    e.preventDefault();\n    DataActions.filterChange();\n  }\n\n  _onClick(e){\n    e.preventDefault();\n\n    this.chevron = this.toggleCss(this.chevron);\n    this.panel   = this.toggleCss(this.panel);\n\n    this.setState({chevron:this.getClasses(this.chevron), panel:this.getClasses(this.panel)});\n  }\n\n\n  _onChange() {\n    this.setState({filters:FilterStore.getAll()});\n  }\n\n  _onLoaded(){\n    this.setState({filters:FilterStore.getAll()});\n\n  }\n\n}\n\nObject.assign(Filters.prototype, cssMixins);\n\nmodule.exports = Filters;\n"]}