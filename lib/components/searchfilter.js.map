{"version":3,"sources":["../../src/components/searchfilter.js"],"names":[],"mappings":"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","file":"searchfilter.js","sourcesContent":["//Libraries\nconst React   = require(\"react/addons\");\nconst _ = require(\"lodash\");\n\nconst DataActions    = require(\"../actions/data_actions\");\nconst FilterStore    = require(\"../stores/filter_store\");\nconst ColumnsStore   = require(\"../stores/columns_store\");\n\n//Mixins\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\nconst textMixins = require(\"morse-react-mixins\").text_mixins;\n\n//Components\nconst Keys = require(\"./keys\");\n\nclass SearchFilters extends React.Component{\n  // mixins: [cssMixins, textMixins],\n\n  constructor(props) {\n    super(props);\n\n    this.dropdown =  [\"input-group-btn\", {\"open\":false}];\n\n    this.state = {\n      dropdown:this.getClasses(this.dropdown),\n      expanded:\"false\",\n      selectedkey:\"all\"\n    };\n  }\n\n  componentDidMount() {\n    this.quickSearch = (_.isBoolean(this.props.quickSearch)) ? this.props.quickSearch : true;\n\n    if(FilterStore.isSelectedKey(this.props.item)){\n      this.active = [{active:true}];\n      this.setState({active:this.getClasses(this.active)});\n    }\n\n    FilterStore.addChangeListener(\"change_key\", this._openDropdown.bind(this));\n    ColumnsStore.addChangeListener(\"adding\", this._onAdd.bind(this));\n  }\n\n  componentWillUnmount() {\n    FilterStore.removeChangeListener(\"change_key\", this._openDropdown);\n    ColumnsStore.removeChangeListener(\"adding\", this._onAdd);\n  }\n\n  _onAdd(){\n    this.setState({\n      keys:ColumnsStore.getSearchable()\n    });\n  }\n\n  _onChange(e){\n    if(this.quickSearch){\n      if(this.loop){\n        window.clearTimeout(this.loop);\n      }\n\n      this.loop = window.setTimeout((val)=>{\n        if(val.length > 3 ){\n          DataActions.searching(val);\n        }\n      }, 100, e.target.value);\n    }\n\n    // _.defer((val)=>{\n    //   DataActions.searching(val);\n    // }, e.target.value);\n  }\n\n  _openDropdown(){\n    this.dropdown = this.toggleCss(this.dropdown);\n    let expanded  = (this.state.expended === \"true\") ? \"false\" : \"true\";\n    this.setState({\n      dropdown:this.getClasses(this.dropdown),\n      expanded:expanded,\n      selectedkey:FilterStore.getSelectedKey()\n    });\n  }\n\n  _preventSubmit(e){\n    console.log(\"submiting\", e);\n    e.preventDefault();\n\n  }\n\n  renderKeys(){\n    if(this.state.keys){\n      let items = this.state.keys.map(function(k){\n        return (<Keys item={k} />);\n        });\n\n        return items;\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this._preventSubmit.bind(this)}>\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n              <div className=\"input-group vPad20\">\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Search for...\" onChange={this._onChange.bind(this)} />\n                  <span className={this.state.dropdown}>\n                      <button className=\"btn btn-primary\" type=\"button\"><span className=\"glyphicon glyphicon-search\" aria-hidden=\"true\"></span></button>\n                      <button type=\"button\" className=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded={this.state.expanded} onClick={this._openDropdown.bind(this)} >\n                        {this.capitalize(this.state.selectedkey)}\n                        &nbsp;<span className=\"caret\"></span>\n                        <span className=\"sr-only\">Toggle Dropdown</span>\n                      </button>\n                      <ul className=\"dropdown-menu\">\n                        <Keys item=\"all\" />\n                        <li role=\"separator\" className=\"divider\"></li>\n                        {this.renderKeys()}\n                      </ul>\n                  </span>\n              </div>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nObject.assign(SearchFilters.prototype, cssMixins);\nObject.assign(SearchFilters.prototype, textMixins);\n\nmodule.exports = SearchFilters;\n"]}